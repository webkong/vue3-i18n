"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");const t=Symbol("i18n"),r=(e,t,n)=>{const o=e[0];if(~o.indexOf("[")){const[s,l]=o.split("["),a=parseInt(l.replace("]",""));if(a>-1){if(!t[s]&&t[s].length>0&&t[s][a]&&""!==t[s][a])throw new Error("Not Found");return 1===e.length?"string"==typeof t[s][a]?t[s][a]:"":r(e.slice(1),t[s][a],n)}throw new Error(`Not Found: ${o}`)}if(t[e[0]]||""===t[e[0]]){if(1===e.length){let r="string"==typeof t[e[0]]?t[e[0]]:"";return n&&(r=((e,t)=>{const r=/{(\w*)}/g;let n,o=e;for(;null!==(n=r.exec(e));){if(!Object.prototype.hasOwnProperty.call(t,n[1]))throw new Error(`Not Found Params: ${n[1]}`);o=o.replace(n[0],t[n[1]])}return o})(r,n)),r}return r(e.slice(1),t[e[0]],n)}throw new Error("Not Found")};exports.createI18n=n=>{const o=e.ref(n.locale||"en"),s=n.messages;return{messages:s,t:(e,t)=>{const n=s[o.value]||s.en;if("string"!=typeof e)return console.warn("Warn(i18n):","keypath must be a type of string"),"";try{return r(e.split("."),n,t)}catch(t){return console.warn(`Warn(i18n): the keypath '${e}' not found`),""}},setLocale:e=>{s[e]||console.warn(`Warn(i18n): the '${e}' language pack not found, fall back to English language pack`),o.value=e},getLocale:()=>o.value,install(e){const r=this;e.provide(t,r),e.config.globalProperties.$t=r.t,e.config.globalProperties.$i18n=r}}},exports.i18nSymbol=t,exports.useI18n=function(){return e.inject(t)};
